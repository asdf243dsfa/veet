<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>IntelliMeet</title>
		<link href="style.css" rel="stylesheet" />
	</head>
	<body>
		<!-- Language Selector -->
		<div class="language-selector">
			<select data-language-selector>
				<option value="en">🇺🇸 English</option>
				<option value="es">🇪🇸 Español</option>
				<option value="fr">🇫🇷 Français</option>
				<option value="de">🇩🇪 Deutsch</option>
				<option value="it">🇮🇹 Italiano</option>
				<option value="pt">🇵🇹 Português</option>
				<option value="ja">🇯🇵 日本語</option>
				<option value="ko">🇰🇷 한국어</option>
				<option value="zh">🇨🇳 中文</option>
				<option value="ar">🇸🇦 العربية</option>
				<option value="hi">🇮🇳 हिन्दी</option>
			</select>
		</div>

		<div class="logo"><img src="images/intellimeet.png" /> <span data-i18n="logo_text">IntelliMeet</span></div>
		<h1 data-i18n="main_heading">Enterprise-grade AI multilingual video communications</h1>
		<p data-i18n="description">Connect, collaborate, and communicate globally with IntelliMeet's intelligent translation technology</p>
		<div id="lobby">
			<form id="new">
				<button>
					<img src="images/video_add.svg" />
					<span data-i18n="new_meeting_button">New Meeting</span>
				</button>
			</form>
			<form id="join">
				<input type="url" name="url" data-i18n="meeting_link_placeholder" placeholder="Meeting Link" value="" />
				<button data-i18n="join_button">Join</button>
			</form>
		</div>
	</body>
	<script>
		const joinForm = document.getElementById('join');
		const newFrom = document.getElementById('new');

		function startCall(id) {
			window.location.href = `/call?i=${id}`;
		}

		newFrom.addEventListener('submit', async (e) => {
			e.preventDefault();
			startCall(crypto.randomUUID());
		});

		joinForm.addEventListener('submit', async (e) => {
			e.preventDefault();
			const data = Object.fromEntries(new FormData(e.target));
			const url = new URL(data.url);
			const id = url.searchParams.get('i');
			if (!id) return;
			startCall(id);
		});
	</script>
	<script src="js/i18n.js"></script>
</html>
